model Contact {
  id        String   @id @default(cuid())
  name      String
  email     String
  message   String
  subject   String?
  status    String   @default("new")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("contacts")
}

// model PendingRegistration {
//   id           String   @id @default(cuid())
//   token        String   @unique
//   email        String
//   username     String
//   passwordHash String
//   type         String
//   role         String?
//   displayName  String?
//   expiresAt    DateTime
//   createdAt    DateTime @default(now())
//   updatedAt    DateTime @updatedAt

//   @@map("pending_registrations")
// }

/// Email batching for unread message notifications
/// Tracks 15-minute collection windows before sending notification emails
model EmailBatch {
  id             String   @id @default(cuid())
  userId         String   // Recipient user ID
  firstMessageAt DateTime // When the collection window started
  messageCount   Int      @default(1) // Number of messages in this batch
  processed      Boolean  @default(false) // Whether email was sent
  processedAt    DateTime? // When email was sent
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId, processed, firstMessageAt])
  @@map("email_batches")
}
